-- Local key-check GUI + loadstring (hardcoded keys)
local SCRIPT_URL = "https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt"

-- Danh sách key hợp lệ (thêm/xóa ở đây)
local validKeys = {
    ["bobacon@@"] = true,
    ["bobacon@@"] = true,
    ["bobacon@@"] = true,
}

-- Tạo GUI đơn giản
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KeyCheckGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 320, 0, 120)
frame.Position = UDim2.new(0.5, -160, 0.4, -60)
frame.BackgroundTransparency = 0.15
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.Parent = screenGui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -20, 0, 30)
title.Position = UDim2.new(0, 10, 0, 10)
title.BackgroundTransparency = 1
title.Text = "Enter Key"
title.TextScaled = true
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Parent = frame

local box = Instance.new("TextBox")
box.Size = UDim2.new(1, -20, 0, 40)
box.Position = UDim2.new(0, 10, 0, 40)
box.PlaceholderText = "Type key here..."
box.Text = ""
box.ClearTextOnFocus = false
box.Parent = frame

local btn = Instance.new("TextButton")
btn.Size = UDim2.new(0.5, -15, 0, 28)
btn.Position = UDim2.new(0, 10, 1, -38)
btn.Text = "Submit"
btn.Parent = frame

local cancelBtn = Instance.new("TextButton")
cancelBtn.Size = UDim2.new(0.5, -15, 0, 28)
cancelBtn.Position = UDim2.new(0.5, 5, 1, -38)
cancelBtn.Text = "Close"
cancelBtn.Parent = frame

local function notify(msg)
    -- simple temporary text change as "notification"
    local old = title.Text
    title.Text = msg
    wait(2)
    title.Text = old
end

local function tryLoad()
    local key = box.Text:match("^%s*(.-)%s*$") -- trim
    if key == "" then
        notify("Please enter a key")
        return
    end

    if validKeys[key] then
        -- success: load script
        notify("Key valid. Loading...")
        local ok, res = pcall(function()
            return game:HttpGet(SCRIPT_URL)
        end)
        if ok and res and #res > 0 then
            local fok, ferr = pcall(function() loadstring(res)() end)
            if not fok then
                notify("Load error: "..tostring(ferr))
            end
        else
            notify("Download failed.")
        end
        screenGui:Destroy()
    else
        notify("Invalid key!")
    end
end

btn.MouseButton1Click:Connect(tryLoad)
cancelBtn.MouseButton1Click:Connect(function() screenGui:Destroy() end)

-- Optional: auto-focus box
box:CaptureFocus()
